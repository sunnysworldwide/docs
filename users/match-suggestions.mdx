---
title: 'Get Match Suggestions'
openapi: 'GET /user/match-suggestions'
---

Admin-only endpoint that returns suggested user pairs that may represent the same person. Suggestions are generated by comparing emails and personal information (first name, last name, name).

## Request

### Headers

| Name           | Type   | Required | Description          |
|----------------|--------|----------|----------------------|
| Authorization | string | Yes      | Bearer token        |

## Response

### 200 OK - Successfully retrieved match suggestions

```json
{
  "message": "Match suggestions retrieved successfully",
  "data": {
    "suggestions": [
      [
        {
          "_id": "64b7f1a2e4b0a5d3f9c12345",
          "emails": "john.doe@example.com",
          "firstName": "John",
          "lastName": "Doe",
          "name": "John Doe",
          "matchScore": 0.95
        },
        {
          "_id": "64b7f2b3e4b0a5d3f9c54321",
          "emails": "j.doe@company.com",
          "firstName": "John",
          "lastName": "Doe",
          "name": "John Doe",
          "matchScore": 0.95
        }
      ],
      [
        {
          "_id": "64b7f3c4e4b0a5d3f9c98765",
          "emails": "jane.smith@example.com",
          "firstName": "Jane",
          "lastName": "Smith",
          "name": "Jane Smith",
          "matchScore": 0.87
        },
        {
          "_id": "64b7f4d5e4b0a5d3f9c11111",
          "emails": "jane.s@company.com",
          "firstName": "Jane",
          "lastName": "Smith",
          "name": "Jane Smith",
          "matchScore": 0.87
        }
      ]
    ]
  }
}
```

### 401 Unauthorized

```json
{
  "error": {
    "code": "UNAUTHORIZED",
    "message": "Missing or invalid token or insufficient permissions"
  }
}
```

### 500 Internal Server Error

```json
{
  "error": {
    "code": "SERVER_ERROR",
    "message": "Internal server error"
  }
}
```

## Example

```bash
curl -X GET 'http://localhost:2000/user/match-suggestions' \
  -H 'Authorization: Bearer your-jwt-token'
```

## Notes

- This is an admin-only endpoint - requires administrative privileges
- Suggestions are based on similarity of emails and personal information
- Each suggestion is an array of 2 users that may represent the same person
- The match score indicates confidence level (0.0 to 1.0)
- Higher scores indicate stronger matches
- Use these suggestions to identify potential duplicate accounts
- After reviewing, use the link-accounts endpoint to merge duplicates
- The algorithm compares: email domains, names, and other personal data
- Suggestions are generated in real-time and may change as user data updates

## Matching Criteria

The system considers the following when generating suggestions:
- Email address similarity (same domain, similar local parts)
- Exact name matches (first and last name)
- Similar email patterns (e.g., john.doe vs j.doe)
- Phone number matches
- Department and role similarities

## Usage Workflow

1. Call this endpoint to get potential duplicate pairs
2. Review each suggestion manually
3. Use the `/user/link-accounts` endpoint to merge confirmed duplicates
4. Repeat periodically to catch new potential duplicates
